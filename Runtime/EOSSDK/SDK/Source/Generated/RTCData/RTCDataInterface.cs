// Copyright Epic Games, Inc. All Rights Reserved.
// This file is automatically generated. Changes to this file may be overwritten.

using System;

namespace Epic.OnlineServices.RTCData
{
	public sealed partial class RTCDataInterface : Handle
	{
		public RTCDataInterface()
		{
		}

		public RTCDataInterface(IntPtr innerHandle) : base(innerHandle)
		{
		}

		/// <summary>
		/// The most recent version of the <see cref="AddNotifyDataReceived" /> API.
		/// </summary>
		public const int ADDNOTIFYDATARECEIVED_API_LATEST = 1;
		/// <summary>
		/// The most recent version of the <see cref="AddNotifyParticipantUpdated" /> API.
		/// </summary>
		public const int ADDNOTIFYPARTICIPANTUPDATED_API_LATEST = 1;
		/// <summary>
		/// The maximum length of data chunk in bytes that can be sent and received
		/// </summary>
		public const int MAX_PACKET_SIZE = 1170;
		/// <summary>
		/// The most recent version of the <see cref="SendData" /> API.
		/// </summary>
		public const int SENDDATA_API_LATEST = 1;
		/// <summary>
		/// The most recent version of the <see cref="UpdateReceiving" /> API.
		/// </summary>
		public const int UPDATERECEIVING_API_LATEST = 1;
		/// <summary>
		/// The most recent version of the <see cref="UpdateSending" /> API.
		/// </summary>
		public const int UPDATESENDING_API_LATEST = 1;

		/// <summary>
		/// Register to receive notifications with remote data packet received.
		/// If the returned NotificationId is valid, you must call <see cref="RemoveNotifyDataReceived" /> when you no longer wish to
		/// have your CompletionDelegate called.
		/// The CompletionDelegate may be called from a thread other than the one from which the SDK is ticking.
		/// <see cref="Common.INVALID_NOTIFICATIONID" />
		/// <see cref="RemoveNotifyDataReceived" />
		/// </summary>
		/// <param name="clientData">
		/// Arbitrary data that is passed back in the CompletionDelegate
		/// </param>
		/// <param name="completionDelegate">
		/// The callback to be fired when a data packet is received
		/// </param>
		/// <returns>
		/// Notification ID representing the registered callback if successful, an invalid NotificationId if not
		/// </returns>
		public ulong AddNotifyDataReceived(ref AddNotifyDataReceivedOptions options, object clientData, OnDataReceivedCallback completionDelegate)
		{
			if (completionDelegate == null)
			{
				throw new ArgumentNullException("completionDelegate");
			}

			var optionsInternal = default(AddNotifyDataReceivedOptionsInternal);
			optionsInternal.Set(ref options);

			var clientDataPointer = IntPtr.Zero;

			Helper.AddCallback(out clientDataPointer, clientData, completionDelegate);

			var callResult = Bindings.EOS_RTCData_AddNotifyDataReceived(InnerHandle, ref optionsInternal, clientDataPointer, OnDataReceivedCallbackInternalImplementation.Delegate);

			Helper.Dispose(ref optionsInternal);

			Helper.AssignNotificationIdToCallback(clientDataPointer, callResult);

			return callResult;
		}

		/// <summary>
		/// Register to receive notifications when a room participant data status is updated (f.e when connection state changes).
		/// 
		/// The notification is raised when the participant's data status is updated. In order not to miss any participant status changes, applications need to add the notification before joining a room.
		/// 
		/// If the returned NotificationId is valid, you must call <see cref="RemoveNotifyParticipantUpdated" /> when you no longer wish
		/// to have your CompletionDelegate called.
		/// <see cref="Common.INVALID_NOTIFICATIONID" />
		/// <see cref="RemoveNotifyParticipantUpdated" />
		/// <see cref="ParticipantUpdatedCallbackInfo" />
		/// <see cref="RTCDataStatus" />
		/// </summary>
		/// <param name="options">
		/// structure containing the parameters for the operation.
		/// </param>
		/// <param name="clientData">
		/// Arbitrary data that is passed back in the CompletionDelegate
		/// </param>
		/// <param name="completionDelegate">
		/// The callback to be fired when a participant changes data status
		/// </param>
		/// <returns>
		/// Notification ID representing the registered callback if successful, an invalid NotificationId if not
		/// </returns>
		public ulong AddNotifyParticipantUpdated(ref AddNotifyParticipantUpdatedOptions options, object clientData, OnParticipantUpdatedCallback completionDelegate)
		{
			if (completionDelegate == null)
			{
				throw new ArgumentNullException("completionDelegate");
			}

			var optionsInternal = default(AddNotifyParticipantUpdatedOptionsInternal);
			optionsInternal.Set(ref options);

			var clientDataPointer = IntPtr.Zero;

			Helper.AddCallback(out clientDataPointer, clientData, completionDelegate);

			var callResult = Bindings.EOS_RTCData_AddNotifyParticipantUpdated(InnerHandle, ref optionsInternal, clientDataPointer, OnParticipantUpdatedCallbackInternalImplementation.Delegate);

			Helper.Dispose(ref optionsInternal);

			Helper.AssignNotificationIdToCallback(clientDataPointer, callResult);

			return callResult;
		}

		/// <summary>
		/// Unregister a previously bound notification handler from receiving remote data packets.
		/// </summary>
		/// <param name="notificationId">
		/// The Notification ID representing the registered callback
		/// </param>
		public void RemoveNotifyDataReceived(ulong notificationId)
		{
			Bindings.EOS_RTCData_RemoveNotifyDataReceived(InnerHandle, notificationId);

			Helper.RemoveCallbackByNotificationId(notificationId);
		}

		/// <summary>
		/// Unregister a previously bound notification handler from receiving participant updated notifications
		/// </summary>
		/// <param name="notificationId">
		/// The Notification ID representing the registered callback
		/// </param>
		public void RemoveNotifyParticipantUpdated(ulong notificationId)
		{
			Bindings.EOS_RTCData_RemoveNotifyParticipantUpdated(InnerHandle, notificationId);

			Helper.RemoveCallbackByNotificationId(notificationId);
		}

		/// <summary>
		/// Use this function to send a data packet to the rest of participants.
		/// </summary>
		/// <param name="options">
		/// structure containing the parameters for the operation.
		/// </param>
		/// <returns>
		/// <see cref="Result.Success" /> the data packet was queued for sending
		/// <see cref="Result.InvalidParameters" /> if any of the options are invalid
		/// <see cref="Result.NotFound" /> if the specified room was not found
		/// </returns>
		public Result SendData(ref SendDataOptions options)
		{
			var optionsInternal = default(SendDataOptionsInternal);
			optionsInternal.Set(ref options);

			var callResult = Bindings.EOS_RTCData_SendData(InnerHandle, ref optionsInternal);

			Helper.Dispose(ref optionsInternal);

			return callResult;
		}

		/// <summary>
		/// Use this function to tweak incoming data options for a room.
		/// </summary>
		/// <param name="options">
		/// structure containing the parameters for the operation.
		/// </param>
		/// <param name="clientData">
		/// Arbitrary data that is passed back in the CompletionDelegate
		/// </param>
		/// <param name="completionDelegate">
		/// The callback to be fired when the operation completes, either successfully or in error
		/// </param>
		/// <returns>
		/// <see cref="Result.Success" /> if the operation succeeded
		/// <see cref="Result.InvalidParameters" /> if any of the parameters are incorrect
		/// <see cref="Result.NotFound" /> if either the local user or specified participant are not in the room
		/// </returns>
		public void UpdateReceiving(ref UpdateReceivingOptions options, object clientData, OnUpdateReceivingCallback completionDelegate)
		{
			if (completionDelegate == null)
			{
				throw new ArgumentNullException("completionDelegate");
			}

			var optionsInternal = default(UpdateReceivingOptionsInternal);
			optionsInternal.Set(ref options);

			var clientDataPointer = IntPtr.Zero;

			Helper.AddCallback(out clientDataPointer, clientData, completionDelegate);

			Bindings.EOS_RTCData_UpdateReceiving(InnerHandle, ref optionsInternal, clientDataPointer, OnUpdateReceivingCallbackInternalImplementation.Delegate);

			Helper.Dispose(ref optionsInternal);
		}

		/// <summary>
		/// Use this function to tweak outgoing data options for a room.
		/// </summary>
		/// <param name="options">
		/// structure containing the parameters for the operation.
		/// </param>
		/// <param name="clientData">
		/// Arbitrary data that is passed back in the CompletionDelegate
		/// </param>
		/// <param name="completionDelegate">
		/// The callback to be fired when the operation completes, either successfully or in error
		/// </param>
		/// <returns>
		/// <see cref="Result.Success" /> if the operation succeeded
		/// <see cref="Result.InvalidParameters" /> if any of the parameters are incorrect
		/// <see cref="Result.NotFound" /> if the local user is not in the room
		/// </returns>
		public void UpdateSending(ref UpdateSendingOptions options, object clientData, OnUpdateSendingCallback completionDelegate)
		{
			if (completionDelegate == null)
			{
				throw new ArgumentNullException("completionDelegate");
			}

			var optionsInternal = default(UpdateSendingOptionsInternal);
			optionsInternal.Set(ref options);

			var clientDataPointer = IntPtr.Zero;

			Helper.AddCallback(out clientDataPointer, clientData, completionDelegate);

			Bindings.EOS_RTCData_UpdateSending(InnerHandle, ref optionsInternal, clientDataPointer, OnUpdateSendingCallbackInternalImplementation.Delegate);

			Helper.Dispose(ref optionsInternal);
		}
	}
}
